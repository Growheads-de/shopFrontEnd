<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="/">
  <title>GrowBNB</title>
</head>
<body>
  <div id="root"></div>
  <script>
    // Get git commit from meta tag
    window.gitCommit = document.querySelector('meta[name="git-commit"]')?.content || 'unknown';
    console.log('Git commit:', window.gitCommit);
    function checkForUpdates() {
      fetch('/?nocache=' + new Date().getTime())
        .then(response => response.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const metaCommit = doc.querySelector('meta[name="git-commit"]')?.content;
          
          if (metaCommit && metaCommit !== window.gitCommit) {
            console.log('New version available (from HTML meta), refreshing...');
            window.location.reload();
          }
        })
        .catch(error => console.error('Update check via HTML failed:', error));
    }
    
    // Check for updates every 5 minutes
    setInterval(checkForUpdates, 30 * 1000);
    // Also check once shortly after page load
    setTimeout(checkForUpdates, 10 * 1000);
  </script>
</body>
</html> 